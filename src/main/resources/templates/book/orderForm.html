<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Order Form</title>
</head>
<body>
<h1>주문하기</h1>
<div th:if="${error}">
  <p th:text="${error}" style="color: red;"></p>
</div>

<div th:if="${book}">
  <h2>책 상세정보</h2>
  <h3>제목 : <span th:text="${book.title}"></span></h3>
  <p>저자 : <span th:text="${book.author}"></span></p>
  <p>출판사 : <span th:text="${book.publisher}"></span></p>
  <p>출판일 : <span th:text="${book.pubDate}"></span></p>
  <p>가격 : <span th:text="${book.price}"></span></p>
  <p>수량 : <span th:text="${book.quantity}"></span></p>
  <p>배송비 : <span th:text="${book.deliveryFee}"></span></p>

  <hr>

  <h2>주문 정보</h2>
  <form th:action="@{/book/order/submit}" method="post">
    <input type="hidden" name="bookId" th:value="${book.id}">

    <label for="buyerName">이름 : </label>
    <input type="text" id="buyerName" name="buyerName" required>

    <label for="buyerPhoneNum">전화번호 :</label>
    <input type="email" id="buyerPhoneNum" name="buyerPhoneNum" required>

    <label for="buyerEmail">이메일 :</label>
    <input type="email" id="buyerEmail" name="buyerEmail" required>

    <label for="shippingAddress">주소 :</label>
    <textarea id="shippingAddress" name="shippingAddress" required></textarea>

    <label for="zipCode"></label>
    <textarea id="zipCode" name="zipCode" required></textarea>

    <button type="submit">주문하기</button>
  </form>
</div>

<div th:if="${cartItems}">
  <h2>장바구니</h2>
  <ul>
    <li th:each="item : ${cartItems}">
      <h3>제목 : <span th:text="${item.title}"></span></h3>
      <p>저자 : <span th:text="${item.author}"></span></p>
      <p>출판사 : <span th:text="${item.publisher}"></span></p>
      <p>출판일 : <span th:text="${item.pubDate}"></span></p>
      <p>가격 : <span th:text="${item.price}"></span></p>
      <p>수량 : <span th:text="${item.quantity}"></span></p>
      <p>배송비 : <span th:text="${item.deliveryFee}"></span></p>
      <hr>
    </li>
  </ul>

  <h2>주문 정보</h2>
  <form th:action="@{/book/order/submit}" method="post">
    <input type="hidden" name="isCartOrder" value="true">

    <label for="buyerName">이름 : </label>
    <input type="text" id="buyerName" name="buyerName" required>

    <label for="buyerPhoneNum">전화번호 :</label>
    <input type="email" id="buyerPhoneNum" name="buyerPhoneNum" required>

    <label for="buyerEmail">이메일 :</label>
    <input type="email" id="buyerEmail" name="buyerEmail" required>

    <label for="shippingAddress">주소 :</label>
    <textarea id="shippingAddress" name="shippingAddress" required></textarea>

    <label for="zipCode"></label>
    <textarea id="zipCode" name="zipCode" required></textarea>

    <button type="submit">주문하기</button>
  </form>
</div>

<div th:if="${not book and not cartItems}">
  <p>책을 선택해주세요.</p>
</div>
</body>
</html>
